---
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import { getCollection } from "astro:content";

const projects = (await getCollection("projects")).map((project) => ({
  name: project.data.name,
  description: project.data.description,
  link: project.data.url,
  github: project.data.github,
  sourceAvailable: project.data.github !== undefined,
}));
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <BaseHead title={"Projects"} description={"My Projects"} />
  </head>
  <body>
    <Header title={"Projects"} />
    <main>
      <h1>Projects</h1>
      <p>
        This is a list of my projects. You can find the source code for most of
        them on my <a href="https://github/jak2k">GitHub profile</a>.
      </p>
      <ul>
        {
          projects.map((project) => (
            <li>
              <a href={project.link}>{project.name}</a>{" "}
              {project.sourceAvailable && <a href={project.github}>GitHub</a>}
              <p>{project.description}</p>
            </li>
          ))
        }
      </ul>
    </main>
    <style>
      ul {
        list-style-type: none;
        padding: 0;
      }

      li {
        margin-bottom: 1rem;
        border-left: 0.1em solid black;

        padding: 0.5rem;
      }
    </style>
    <Footer />
  </body>
</html>
